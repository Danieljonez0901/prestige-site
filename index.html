<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prestige Digital Marketing - Performance Analytics</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Playfair+Display:wght@400;500;600;700;800;900&display=swap');
        
        :root {
            --primary-gradient: linear-gradient(135deg, #ec4899 0%, #be185d 30%, #d946ef 60%, #f3e8ff 100%);
            --dark-gradient: linear-gradient(135deg, #0f0f1a 0%, #1a1a2e 50%, #2d1b69 100%);
            --glass-bg: rgba(255, 255, 255, 0.95);
            --glass-border: rgba(255, 255, 255, 0.18);
            --shadow-primary: 0 20px 60px rgba(236, 72, 153, 0.15);
            --shadow-elevated: 0 25px 80px rgba(0, 0, 0, 0.1);
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --pink-primary: #ec4899;
            --pink-secondary: #be185d;
            --purple-accent: #d946ef;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--dark-gradient);
            background-attachment: fixed;
            color: #f1f5f9;
            line-height: 1.7;
            overflow-x: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            --glass-bg: rgba(30, 41, 59, 0.9);
            --glass-border: rgba(148, 163, 184, 0.1);
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
        }

        body.dark-mode {
            /* Already in dark mode by default - no changes needed */
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            box-shadow: var(--shadow-elevated);
            min-height: 100vh;
            position: relative;
        }

        .header {
            background: var(--primary-gradient);
            color: white;
            padding: 80px 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
            border-radius: 0 0 40px 40px;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 30% 70%, rgba(255,255,255,0.1) 0%, transparent 50%),
                        radial-gradient(circle at 70% 30%, rgba(255,255,255,0.08) 0%, transparent 50%);
            pointer-events: none;
        }

        .header-controls {
            position: absolute;
            top: 30px;
            right: 40px;
            display: flex;
            gap: 15px;
            z-index: 100;
        }

        .control-btn {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 12px 20px;
            border-radius: 50px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(255, 255, 255, 0.1);
        }

        .logo-container {
            width: 280px;
            height: 280px;
            margin: 0 auto 40px;
            position: relative;
            z-index: 10;
        }

        .logo {
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .logo::before {
            content: '';
            position: absolute;
            inset: -2px;
            background: conic-gradient(from 180deg at 50% 50%, transparent 0deg, rgba(255,255,255,0.4) 180deg, transparent 360deg);
            border-radius: 50%;
            animation: rotate 8s linear infinite;
            z-index: -1;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .header h1 {
            font-family: 'Playfair Display', serif;
            font-size: 4rem;
            font-weight: 900;
            margin-bottom: 20px;
            text-shadow: 0 4px 20px rgba(0,0,0,0.3);
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header .subtitle {
            font-size: 1.5rem;
            font-weight: 300;
            opacity: 0.95;
            letter-spacing: 3px;
            text-transform: uppercase;
            margin-bottom: 30px;
        }

        .metrics-bar {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .metric {
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 20px 30px;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .metric-value {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .metric-label {
            font-size: 0.9rem;
            opacity: 0.8;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .progress-section {
            padding: 30px 40px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .progress-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--pink-primary) 0%, var(--purple-accent) 100%);
            border-radius: 10px;
            transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            width: 14.3%;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.3) 50%, transparent 100%);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .step-navigation {
            display: flex;
            justify-content: center;
            gap: 20px;
            padding: 20px;
            flex-wrap: wrap;
        }

        .step-indicator {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: rgba(255, 255, 255, 0.7);
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
        }

        .step-indicator.active {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            transform: scale(1.05);
        }

        .page {
            display: none;
            padding: 60px;
            min-height: 70vh;
        }

        .page.active {
            display: block;
            animation: pageEnter 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes pageEnter {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .page-title {
            font-family: 'Playfair Display', serif;
            font-size: 3rem;
            font-weight: 700;
            color: var(--text-primary);
            text-align: center;
            margin-bottom: 50px;
            position: relative;
        }

        .page-title::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: var(--primary-gradient);
            border-radius: 2px;
        }

        .shift-selection {
            text-align: center;
            padding: 80px 40px;
        }

        .shift-subtitle {
            font-size: 1.3rem;
            color: var(--text-secondary);
            margin-bottom: 50px;
            font-weight: 400;
        }

        .shift-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
            max-width: 1000px;
            margin: 0 auto;
        }

        .shift-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            padding: 40px 30px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .shift-card::before {
            content: '';
            position: absolute;
            inset: 0;
            background: var(--primary-gradient);
            opacity: 0;
            transition: opacity 0.3s ease;
            border-radius: 25px;
        }

        .shift-card:hover::before {
            opacity: 0.1;
        }

        .shift-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-primary);
            border-color: var(--pink-primary);
        }

        .shift-time {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--pink-primary);
            margin-bottom: 15px;
            position: relative;
            z-index: 2;
        }

        .shift-details {
            color: var(--text-secondary);
            font-size: 1rem;
            position: relative;
            z-index: 2;
        }

        .dm-count {
            font-weight: 600;
            color: var(--purple-accent);
        }

        .mass-dm-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .dm-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            padding: 35px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .dm-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--primary-gradient);
        }

        .dm-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-primary);
        }

        .dm-card-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--pink-primary);
            margin-bottom: 25px;
            text-align: center;
            background: linear-gradient(135deg, #fdf2f8 0%, #f3e8ff 100%);
            padding: 15px;
            border-radius: 15px;
            border: 1px solid rgba(236, 72, 153, 0.1);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* PROPER INPUT STYLING - WIDE AND TALL */
        .form-input {
            width: 100%;
            padding: 20px;
            border: 2px solid rgba(148, 163, 184, 0.2);
            border-radius: 15px;
            font-size: 1rem;
            font-family: inherit;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            min-height: 60px;
            min-width: 350px;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--pink-primary);
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 0 0 4px rgba(236, 72, 153, 0.1);
        }

        /* NUMBER INPUTS - BIG BOLD NUMBERS */
        .number-input {
            font-size: 1.6rem;
            font-weight: 700;
            text-align: center;
            letter-spacing: 1px;
            min-width: 350px;
        }

        /* MESSAGE TEMPLATE CONSISTENT STYLING */
        .form-input[rows="3"] {
            min-height: 120px;
            resize: vertical;
            font-size: 1rem;
            padding: 20px;
            line-height: 1.5;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 15px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }

        .btn-primary {
            background: var(--primary-gradient);
            color: white;
            box-shadow: 0 10px 30px rgba(236, 72, 153, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(236, 72, 153, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            box-shadow: 0 10px 30px rgba(16, 185, 129, 0.3);
        }

        .btn-info {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            box-shadow: 0 10px 30px rgba(59, 130, 246, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
        }

        .controls-bar {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 40px 0;
            flex-wrap: wrap;
        }

        .data-table {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            overflow-x: auto;
            box-shadow: var(--shadow-primary);
            margin: 30px 0;
        }

        .data-table table {
            width: 100%;
            border-collapse: collapse;
            min-width: 1000px;
        }

        .data-table th {
            background: var(--primary-gradient);
            color: white;
            padding: 25px 20px;
            text-align: left;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            min-width: 200px;
        }

        .data-table td {
            padding: 15px;
            border-bottom: 1px solid rgba(148, 163, 184, 0.1);
            transition: background-color 0.3s ease;
            min-width: 200px;
        }

        .data-table tr:hover td {
            background: rgba(236, 72, 153, 0.05);
        }

        /* TABLE INPUT STYLING */
        .table-input {
            width: 100%;
            padding: 15px;
            border: 2px solid rgba(148, 163, 184, 0.2);
            border-radius: 12px;
            font-size: 1rem;
            background: rgba(255, 255, 255, 0.9);
            min-height: 50px;
            min-width: 180px;
        }

        .table-number {
            font-size: 1.4rem;
            font-weight: 700;
            text-align: center;
        }

        .total-cell {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--pink-primary);
            text-align: center;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 40px 60px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 40px 40px 0 0;
        }

        .nav-btn {
            padding: 18px 35px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .page-info {
            font-size: 1.1rem;
            font-weight: 500;
            color: var(--text-secondary);
            font-family: 'Playfair Display', serif;
        }

        .reports-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }

        .report-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            padding: 35px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .report-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--primary-gradient);
        }

        .report-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-primary);
        }

        .report-card.latest {
            border-color: var(--purple-accent);
            box-shadow: 0 0 30px rgba(217, 70, 239, 0.2);
        }

        .report-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--pink-primary);
            margin-bottom: 15px;
            text-align: center;
        }

        .report-meta {
            font-size: 0.9rem;
            color: var(--text-secondary);
            text-align: center;
            margin-bottom: 25px;
        }

        .report-metrics {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 25px;
        }

        .report-metric {
            text-align: center;
            padding: 15px;
            background: rgba(236, 72, 153, 0.05);
            border-radius: 15px;
            border: 1px solid rgba(236, 72, 153, 0.1);
        }

        .report-metric-value {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--pink-primary);
        }

        .report-metric-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .chart-container {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            padding: 30px;
            margin: 30px 0;
            min-height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: var(--text-secondary);
        }

        @media (max-width: 768px) {
            .header { padding: 60px 20px; }
            .header h1 { font-size: 2.5rem; }
            .logo-container { width: 200px; height: 200px; }
            .page { padding: 40px 20px; }
            .page-title { font-size: 2rem; }
            .navigation { padding: 30px 20px; flex-direction: column; gap: 20px; }
            .shift-grid { grid-template-columns: 1fr; }
            .mass-dm-grid { grid-template-columns: 1fr; }
            .reports-grid { grid-template-columns: 1fr; }
            .metrics-bar { flex-direction: column; gap: 20px; }
            .form-input { min-width: 300px; }
            .table-input { min-width: 150px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-controls">
                <button class="control-btn" onclick="goToReports()">Analytics</button>
                <button class="control-btn" id="reset-btn" type="button">Reset All Data</button>
            </div>
            
            <div class="logo-container">
                <div class="logo">
                    <svg width="220" height="220" viewBox="0 0 200 200">
                        <circle cx="100" cy="100" r="90" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.6)" stroke-width="2"/>
                        <text x="100" y="65" text-anchor="middle" font-family="Playfair Display" font-size="16" font-weight="600" fill="rgba(255,255,255,0.9)">EST. 2022</text>
                        <text x="100" y="88" text-anchor="middle" font-family="Playfair Display" font-size="28" font-weight="800" fill="white">Prestige</text>
                        <text x="100" y="112" text-anchor="middle" font-family="Playfair Display" font-size="20" font-weight="600" fill="white">Digital</text>
                        <text x="100" y="135" text-anchor="middle" font-family="Playfair Display" font-size="28" font-weight="800" fill="white">Marketing</text>
                    </svg>
                </div>
            </div>
            
            <h1>Performance Analytics</h1>
            <p class="subtitle">Elite Marketing Intelligence Platform</p>
            
            <div class="metrics-bar">
                <div class="metric">
                    <div class="metric-value" id="total-reports">247</div>
                    <div class="metric-label">Reports Generated</div>
                </div>
                <div class="metric">
                    <div class="metric-value" id="total-revenue">$127,950</div>
                    <div class="metric-label">Total Revenue</div>
                </div>
                <div class="metric">
                    <div class="metric-value" id="active-campaigns">18</div>
                    <div class="metric-label">Active Campaigns</div>
                </div>
            </div>
        </div>

        <div class="progress-section">
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <div class="step-navigation" id="step-nav">
                <div class="step-indicator active" onclick="showPage(0)">Mass DMs</div>
                <div class="step-indicator" onclick="showPage(1)">Revenue</div>
                <div class="step-indicator" onclick="showPage(2)">Team</div>
                <div class="step-indicator" onclick="showPage(3)">Stories</div>
                <div class="step-indicator" onclick="showPage(4)">PPV</div>
                <div class="step-indicator" onclick="showPage(5)">Promo</div>
                <div class="step-indicator" onclick="showPage(6)">Analytics</div>
            </div>
        </div>

        <!-- Page 0: Mass DMs -->
        <div class="page active" id="page0">
            <h2 class="page-title">Mass DM Campaign Manager</h2>
            
            <div id="shift-selection" class="shift-selection">
                <p class="shift-subtitle">Choose your operational timeframe to begin campaign tracking</p>
                <div class="shift-grid">
                    <div class="shift-card" onclick="selectShift('Morning Shift', '6AM - 2PM', 8)">
                        <div class="shift-time">6AM - 2PM</div>
                        <div class="shift-details">Morning Shift ‚Ä¢ <span class="dm-count">8 Mass DMs</span></div>
                    </div>
                    <div class="shift-card" onclick="selectShift('Afternoon Shift', '2PM - 10PM', 8)">
                        <div class="shift-time">2PM - 10PM</div>
                        <div class="shift-details">Afternoon Shift ‚Ä¢ <span class="dm-count">8 Mass DMs</span></div>
                    </div>
                    <div class="shift-card" onclick="selectShift('Night Shift', '10PM - 6AM', 8)">
                        <div class="shift-time">10PM - 6AM</div>
                        <div class="shift-details">Night Shift ‚Ä¢ <span class="dm-count">8 Mass DMs</span></div>
                    </div>
                    <div class="shift-card" onclick="selectShift('Day Extended', '6AM - 6PM', 12)">
                        <div class="shift-time">6AM - 6PM</div>
                        <div class="shift-details">Extended Day ‚Ä¢ <span class="dm-count">12 Mass DMs</span></div>
                    </div>
                    <div class="shift-card" onclick="selectShift('Night Extended', '6PM - 6AM', 12)">
                        <div class="shift-time">6PM - 6AM</div>
                        <div class="shift-details">Extended Night ‚Ä¢ <span class="dm-count">12 Mass DMs</span></div>
                    </div>
                </div>
            </div>

            <div id="dm-management" style="display: none;">
                <div style="text-align: center; margin-bottom: 40px;">
                    <button class="btn btn-primary" onclick="goBackToSelection()">‚Üê Change Shift</button>
                </div>
                <h3 id="selected-shift" style="text-align: center; margin-bottom: 40px; font-family: 'Playfair Display', serif; font-size: 1.8rem; color: var(--pink-primary);"></h3>
                <div class="controls-bar">
                    <button class="btn btn-info" onclick="exportMassDM()">Export Campaign Data</button>
                </div>
                <div id="dm-grid" class="mass-dm-grid"></div>
            </div>
        </div>

        <!-- Page 1: Revenue Analytics -->
        <div class="page" id="page1">
            <h2 class="page-title">Revenue Analytics</h2>
            <div class="controls-bar">
                <button class="btn btn-success" onclick="addRow('revenue')">Add Revenue Entry</button>
                <button class="btn btn-info" onclick="exportTable('revenue')">Export Data</button>
            </div>
            <div class="data-table">
                <table id="revenue-table">
                    <thead>
                        <tr><th>Date</th><th>PPV Revenue</th><th>No PPV Revenue</th><th>Actions</th></tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><input type="date" class="table-input" value="2025-09-20"></td>
                            <td><input type="number" step="0.01" placeholder="0.00" class="table-input table-number" value="1250.00" min="0"></td>
                            <td><input type="number" step="0.01" placeholder="0.00" class="table-input table-number" value="340.50" min="0"></td>
                            <td><button class="btn btn-danger" onclick="deleteRow(this)">Remove</button></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="chart-container">
                <div>
                    <h3>Revenue Chart</h3>
                    <p>Interactive revenue visualization will be displayed here</p>
                </div>
            </div>
        </div>

        <!-- Page 2: Team Management -->
        <div class="page" id="page2">
            <h2 class="page-title">Team Management</h2>
            <div class="controls-bar">
                <button class="btn btn-success" onclick="addRow('team')">Add Team Member</button>
                <button class="btn btn-info" onclick="exportTable('team')">Export Data</button>
            </div>
            <div class="data-table">
                <table id="team-table">
                    <thead>
                        <tr><th>Chatter</th><th>Shift</th><th>Actions</th></tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <select class="table-input">
                                    <option value="dan" selected>Dan</option>
                                    <option value="nassim">Nassim</option>
                                    <option value="dannny">Dannny</option>
                                    <option value="kay">Kay</option>
                                </select>
                            </td>
                            <td>
                                <select class="table-input">
                                    <option value="6am-2pm" selected>6AM - 2PM</option>
                                    <option value="2pm-10pm">2PM - 10PM</option>
                                    <option value="10pm-6am">10PM - 6AM</option>
                                    <option value="6am-6pm">6AM - 6PM</option>
                                    <option value="6pm-6am">6PM - 6AM</option>
                                </select>
                            </td>
                            <td><button class="btn btn-danger" onclick="deleteRow(this)">Remove</button></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Page 3: Stories Management -->
        <div class="page" id="page3">
            <h2 class="page-title">Stories Campaign</h2>
            <div class="controls-bar">
                <button class="btn btn-success" onclick="addRow('stories')">Add Story</button>
                <button class="btn btn-info" onclick="exportTable('stories')">Export Data</button>
            </div>
            <div class="data-table">
                <table id="stories-table">
                    <thead>
                        <tr><th>Date</th><th>Caption</th><th>Views</th><th>Engagement</th><th>Conversions</th><th>Actions</th></tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><input type="date" class="table-input" value="2025-09-20"></td>
                            <td><input type="text" class="table-input" placeholder="Enter story caption..." value="Check out my exclusive content üî•"></td>
                            <td><input type="number" placeholder="0" class="table-input table-number" value="1847" min="0"></td>
                            <td><input type="number" step="0.01" placeholder="0.00" class="table-input table-number" value="12.3" min="0"></td>
                            <td><input type="number" placeholder="0" class="table-input table-number" value="23" min="0"></td>
                            <td><button class="btn btn-danger" onclick="deleteRow(this)">Remove</button></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Page 4: PPV Management -->
        <div class="page" id="page4">
            <h2 class="page-title">Pay-Per-View Analytics</h2>
            <div class="controls-bar">
                <button class="btn btn-success" onclick="addRow('ppv')">Add PPV Entry</button>
                <button class="btn btn-info" onclick="exportTable('ppv')">Export Data</button>
            </div>
            <div class="data-table">
                <table id="ppv-table">
                    <thead>
                        <tr><th>Date</th><th>Content Type</th><th>Price</th><th>Sales</th><th>Revenue</th><th>Actions</th></tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><input type="date" class="table-input" value="2025-09-20"></td>
                            <td>
                                <select class="table-input">
                                    <option value="bg" selected>BG</option>
                                    <option value="solo">SOLO</option>
                                    <option value="gg">GG</option>
                                    <option value="dp">DP</option>
                                    <option value="anal">ANAL</option>
                                    <option value="mix">MIX</option>
                                </select>
                            </td>
                            <td><input type="number" step="0.01" placeholder="0.00" class="table-input table-number" value="25.00" min="0"></td>
                            <td><input type="number" placeholder="0" class="table-input table-number" value="47" min="0"></td>
                            <td class="total-cell">$1,175.00</td>
                            <td><button class="btn btn-danger" onclick="deleteRow(this)">Remove</button></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="chart-container">
                <div>
                    <h3>PPV Performance Metrics</h3>
                    <p>Real-time PPV analytics and conversion tracking</p>
                </div>
            </div>
        </div>

        <!-- Page 5: Promotions -->
        <div class="page" id="page5">
            <h2 class="page-title">Promo</h2>
            <div class="controls-bar">
                <button class="btn btn-success" onclick="addRow('promotions')">Add Promo</button>
                <button class="btn btn-info" onclick="exportTable('promotions')">Export Data</button>
            </div>
            <div class="data-table">
                <table id="promotions-table">
                    <thead>
                        <tr><th>Model Username</th><th>Start Date</th><th>End Date</th><th>Shoutout Tags</th><th>Actions</th></tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><input type="text" class="table-input" placeholder="Model Username" value="@sexymodel123"></td>
                            <td><input type="date" class="table-input" value="2025-09-20"></td>
                            <td><input type="date" class="table-input" value="2025-09-22"></td>
                            <td><input type="number" class="table-input table-number" placeholder="0" value="8" min="0"></td>
                            <td><button class="btn btn-danger" onclick="deleteRow(this)">Remove</button></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Page 6: Analytics Dashboard -->
        <div class="page" id="page6">
            <h2 class="page-title">Advanced Analytics</h2>
            
            <div class="controls-bar">
                <button class="btn btn-success" onclick="generateNewReport()" style="font-size: 1.1rem; padding: 20px 40px;">
                    üìä Generate New Report & Start Next Cycle
                </button>
                <button class="btn btn-danger" onclick="resetAllData()" style="font-size: 1.1rem; padding: 20px 40px;">
                    üîÑ Reset All Data
                </button>
            </div>
            
            <div class="reports-grid">
                <div class="report-card latest">
                    <div class="report-title">Daily Performance</div>
                    <div class="report-meta">Generated: September 20, 2025</div>
                    <div class="report-metrics">
                        <div class="report-metric">
                            <div class="report-metric-value" id="daily-rev">$3,247</div>
                            <div class="report-metric-label">Today's Revenue</div>
                        </div>
                        <div class="report-metric">
                            <div class="report-metric-value" id="daily-subs">847</div>
                            <div class="report-metric-label">New Subscribers</div>
                        </div>
                        <div class="report-metric">
                            <div class="report-metric-value" id="daily-cvr">23.4%</div>
                            <div class="report-metric-label">Conversion Rate</div>
                        </div>
                        <div class="report-metric">
                            <div class="report-metric-value" id="daily-active">156</div>
                            <div class="report-metric-label">Active Campaigns</div>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="viewReport('daily')">View Full Report</button>
                </div>

                <div class="report-card">
                    <div class="report-title">Weekly Summary</div>
                    <div class="report-meta">Week of September 14-20, 2025</div>
                    <div class="report-metrics">
                        <div class="report-metric">
                            <div class="report-metric-value" id="weekly-rev">$18,950</div>
                            <div class="report-metric-label">Week Revenue</div>
                        </div>
                        <div class="report-metric">
                            <div class="report-metric-value" id="weekly-subs">5,247</div>
                            <div class="report-metric-label">New Subscribers</div>
                        </div>
                        <div class="report-metric">
                            <div class="report-metric-value" id="weekly-cvr">19.8%</div>
                            <div class="report-metric-label">Avg Conversion</div>
                        </div>
                        <div class="report-metric">
                            <div class="report-metric-value" id="weekly-impr">2.1M</div>
                            <div class="report-metric-label">Total Impressions</div>
                        </div>
                    </div>
                    <button class="btn btn-info" onclick="viewReport('weekly')">View Report</button>
                </div>

                <div class="report-card">
                    <div class="report-title">Monthly Overview</div>
                    <div class="report-meta">September 2025 Performance</div>
                    <div class="report-metrics">
                        <div class="report-metric">
                            <div class="report-metric-value" id="monthly-rev">$127,950</div>
                            <div class="report-metric-label">Month Revenue</div>
                        </div>
                        <div class="report-metric">
                            <div class="report-metric-value" id="monthly-subs">23,847</div>
                            <div class="report-metric-label">New Subscribers</div>
                        </div>
                        <div class="report-metric">
                            <div class="report-metric-value" id="monthly-cvr">21.7%</div>
                            <div class="report-metric-label">Monthly Conversion</div>
                        </div>
                        <div class="report-metric">
                            <div class="report-metric-value" id="monthly-reach">8.9M</div>
                            <div class="report-metric-label">Total Reach</div>
                        </div>
                    </div>
                    <button class="btn btn-success" onclick="viewReport('monthly')">View Report</button>
                </div>
            </div>

            <div class="chart-container">
                <div>
                    <h3>Performance Analytics Dashboard</h3>
                    <p>Comprehensive data visualization and insights</p>
                </div>
            </div>
        </div>

        <div class="navigation">
            <button class="nav-btn btn-primary" id="prev-btn" onclick="previousPage()" disabled>‚Üê Previous</button>
            <div class="page-info" id="page-info">Page 1 of 7</div>
            <button class="nav-btn btn-primary" id="next-btn" onclick="nextPage()">Next ‚Üí</button>
        </div>
    </div>

    <script>
        let currentPage = 0;
        let selectedShift = null;
        const totalPages = 7;

        // Removed dark mode toggle function since it's now permanent

        // Navigation functions
        function showPage(pageIndex) {
            if (pageIndex < 0 || pageIndex >= totalPages) return;
            
            // Hide current page
            document.querySelector('.page.active').classList.remove('active');
            
            // Show new page
            document.getElementById(`page${pageIndex}`).classList.add('active');
            
            // Update step indicators
            document.querySelectorAll('.step-indicator').forEach((indicator, index) => {
                indicator.classList.toggle('active', index === pageIndex);
            });
            
            // Update progress bar
            const progressFill = document.getElementById('progress-fill');
            progressFill.style.width = `${((pageIndex + 1) / totalPages) * 100}%`;
            
            // Update navigation
            currentPage = pageIndex;
            updateNavigation();
        }

        function resetNewReportForm() {
            // This function is no longer needed
        }

        function nextPage() {
            if (currentPage < totalPages - 1) {
                showPage(currentPage + 1);
            }
        }

        function previousPage() {
            if (currentPage > 0) {
                showPage(currentPage - 1);
            }
        }

        function updateNavigation() {
            document.getElementById('prev-btn').disabled = currentPage === 0;
            document.getElementById('next-btn').disabled = currentPage === totalPages - 1;
            document.getElementById('page-info').textContent = `Page ${currentPage + 1} of ${totalPages}`;
        }

        function goToReports() {
            showPage(6);
        }

        // Mass DM functions
        function selectShift(name, time, dmCount) {
            selectedShift = { name, time, dmCount };
            document.getElementById('shift-selection').style.display = 'none';
            document.getElementById('dm-management').style.display = 'block';
            document.getElementById('selected-shift').textContent = `${name} (${time})`;
            
            generateDMCards(dmCount);
        }

        function goBackToSelection() {
            document.getElementById('shift-selection').style.display = 'block';
            document.getElementById('dm-management').style.display = 'none';
            selectedShift = null;
        }

        function generateDMCards(count) {
            const grid = document.getElementById('dm-grid');
            grid.innerHTML = '';
            
            for (let i = 1; i <= count; i++) {
                const card = document.createElement('div');
                card.className = 'dm-card';
                card.innerHTML = `
                    <div class="dm-card-title">Mass DM #${i}</div>
                    <div class="form-group">
                        <label class="form-label">Message Template</label>
                        <textarea class="form-input" rows="3" placeholder="Enter your DM message template..."></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Sent To</label>
                        <input type="number" class="form-input number-input" value="${Math.floor(Math.random() * 500) + 100}" min="0">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Viewed</label>
                        <input type="number" class="form-input number-input" value="${Math.floor(Math.random() * 300) + 50}" min="0">
                    </div>
                `;
                grid.appendChild(card);
            }
        }

        // Table management functions
        function addRow(tableType) {
            const table = document.getElementById(`${tableType}-table`).getElementsByTagName('tbody')[0];
            const newRow = table.insertRow();
            
            switch(tableType) {
                case 'revenue':
                    newRow.innerHTML = `
                        <td><input type="date" class="table-input"></td>
                        <td><input type="number" step="0.01" placeholder="0.00" class="table-input table-number" min="0"></td>
                        <td><input type="number" step="0.01" placeholder="0.00" class="table-input table-number" min="0"></td>
                        <td><button class="btn btn-danger" onclick="deleteRow(this)">Remove</button></td>
                    `;
                    break;
                case 'team':
                    newRow.innerHTML = `
                        <td>
                            <select class="table-input">
                                <option value="dan">Dan</option>
                                <option value="nassim">Nassim</option>
                                <option value="dannny">Dannny</option>
                                <option value="kay">Kay</option>
                            </select>
                        </td>
                        <td>
                            <select class="table-input">
                                <option value="6am-2pm">6AM - 2PM</option>
                                <option value="2pm-10pm">2PM - 10PM</option>
                                <option value="10pm-6am">10PM - 6AM</option>
                                <option value="6am-6pm">6AM - 6PM</option>
                                <option value="6pm-6am">6PM - 6AM</option>
                            </select>
                        </td>
                        <td><button class="btn btn-danger" onclick="deleteRow(this)">Remove</button></td>
                    `;
                    break;
                case 'stories':
                    newRow.innerHTML = `
                        <td><input type="date" class="table-input"></td>
                        <td><input type="text" class="table-input" placeholder="Enter story caption..."></td>
                        <td><input type="number" placeholder="0" class="table-input table-number" min="0"></td>
                        <td><input type="number" step="0.01" placeholder="0.00" class="table-input table-number" min="0"></td>
                        <td><input type="number" placeholder="0" class="table-input table-number" min="0"></td>
                        <td><button class="btn btn-danger" onclick="deleteRow(this)">Remove</button></td>
                    `;
                    break;
                case 'ppv':
                    newRow.innerHTML = `
                        <td><input type="date" class="table-input"></td>
                        <td>
                            <select class="table-input">
                                <option value="bg">BG</option>
                                <option value="solo">SOLO</option>
                                <option value="gg">GG</option>
                                <option value="dp">DP</option>
                                <option value="anal">ANAL</option>
                                <option value="mix">MIX</option>
                            </select>
                        </td>
                        <td><input type="number" step="0.01" placeholder="0.00" class="table-input table-number" min="0"></td>
                        <td><input type="number" placeholder="0" class="table-input table-number" min="0"></td>
                        <td class="total-cell">$0.00</td>
                        <td><button class="btn btn-danger" onclick="deleteRow(this)">Remove</button></td>
                    `;
                    break;
                case 'promotions':
                    newRow.innerHTML = `
                        <td><input type="text" class="table-input" placeholder="Model Username"></td>
                        <td><input type="date" class="table-input"></td>
                        <td><input type="date" class="table-input"></td>
                        <td><input type="number" class="table-input table-number" placeholder="0" min="0"></td>
                        <td><button class="btn btn-danger" onclick="deleteRow(this)">Remove</button></td>
                    `;
                    break;
            }
            
            // Add input validation
            addInputValidation(newRow);
            
            // Only add calculation listeners for PPV table (not revenue)
            if (tableType === 'ppv') {
                addCalculationListeners(newRow);
            }
        }

        function deleteRow(button) {
            const row = button.closest('tr');
            row.remove();
        }

        function addCalculationListeners(row) {
            const inputs = row.querySelectorAll('input[type="number"]');
            inputs.forEach(input => {
                input.addEventListener('input', () => updateRowTotal(row));
            });
        }

        function updateRowTotal(row) {
            const inputs = row.querySelectorAll('input[type="number"]');
            if (inputs.length >= 2) {
                const value1 = parseFloat(inputs[0].value) || 0;
                const value2 = parseFloat(inputs[1].value) || 0;
                
                // For revenue: add PPV + No PPV
                // For PPV: multiply price √ó sales
                const isRevenue = row.closest('#revenue-table');
                const total = isRevenue ? value1 + value2 : value1 * value2;
                
                const totalCell = row.querySelector('.total-cell');
                if (totalCell) {
                    totalCell.textContent = `${total.toFixed(2)}`;
                }
            }
        }

        // Input validation function
        function addInputValidation(container = document) {
            container.querySelectorAll('input[type="number"]').forEach(input => {
                // Clean input on typing
                input.addEventListener('input', function(e) {
                    let value = e.target.value;
                    // Remove any non-numeric characters except decimal point
                    value = value.replace(/[^0-9.]/g, '');
                    // Ensure only one decimal point
                    const parts = value.split('.');
                    if (parts.length > 2) {
                        value = parts[0] + '.' + parts.slice(1).join('');
                    }
                    e.target.value = value;
                    
                    // Update row total if applicable
                    const row = e.target.closest('tr');
                    if (row && (row.closest('#revenue-table') || row.closest('#ppv-table'))) {
                        updateRowTotal(row);
                    }
                });

                // Set default value to 0 if empty
                input.addEventListener('blur', function(e) {
                    if (e.target.value === '' || isNaN(parseFloat(e.target.value))) {
                        e.target.value = '0';
                        const row = e.target.closest('tr');
                        if (row && (row.closest('#revenue-table') || row.closest('#ppv-table'))) {
                            updateRowTotal(row);
                        }
                    }
                });
            });
        }

        // Export functionality
        function exportTable(tableType) {
            alert(`Exporting ${tableType} data... This would typically download a CSV file.`);
        }

        function exportMassDM() {
            if (!selectedShift) {
                alert('Please select a shift first.');
                return;
            }
            alert(`Exporting Mass DM data for ${selectedShift.name}...`);
        }

        function viewReport(reportType) {
            // Create a simple modal/popup to show report details
            const reportData = {
                daily: {
                    title: 'Daily Performance Report - September 20, 2025',
                    content: `üìä DAILY METRICS:
‚Ä¢ Total Revenue: $3,247
‚Ä¢ New Subscribers: 847
‚Ä¢ Conversion Rate: 23.4%
‚Ä¢ Active Campaigns: 156
‚Ä¢ Messages Sent: 2,341
‚Ä¢ Response Rate: 18.7%

üéØ TOP PERFORMERS:
‚Ä¢ Best Chatter: Dan (127 conversions)
‚Ä¢ Best Content: BG Video ($847 revenue)
‚Ä¢ Peak Hour: 8PM-9PM`
                },
                weekly: {
                    title: 'Weekly Summary - September 14-20, 2025',
                    content: `üìà WEEKLY METRICS:
‚Ä¢ Total Revenue: $18,950
‚Ä¢ New Subscribers: 5,247
‚Ä¢ Average Conversion: 19.8%
‚Ä¢ Total Impressions: 2.1M
‚Ä¢ Messages Sent: 15,847
‚Ä¢ Story Views: 89,341

üìä GROWTH TRENDS:
‚Ä¢ Revenue up 15% vs last week
‚Ä¢ Subscriber growth: +12%
‚Ä¢ Best performing day: Friday ($4,231)`
                },
                monthly: {
                    title: 'Monthly Overview - September 2025',
                    content: `üéØ MONTHLY METRICS:
‚Ä¢ Total Revenue: $127,950
‚Ä¢ New Subscribers: 23,847
‚Ä¢ Monthly Conversion: 21.7%
‚Ä¢ Total Reach: 8.9M
‚Ä¢ Total Messages: 67,234
‚Ä¢ Story Engagement: 234,567

üèÜ HIGHLIGHTS:
‚Ä¢ Best Revenue Day: Sept 15 ($6,847)
‚Ä¢ Top Chatter: Nassim (2,341 conversions)
‚Ä¢ Most Popular Content: SOLO videos
‚Ä¢ Peak Traffic: Weekends 7-11PM`
                }
            };

            const report = reportData[reportType];
            if (report) {
                // Create modal overlay
                const modal = document.createElement('div');
                modal.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.8);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    z-index: 10000;
                    backdrop-filter: blur(10px);
                `;

                // Create modal content
                const modalContent = document.createElement('div');
                modalContent.style.cssText = `
                    background: var(--glass-bg);
                    backdrop-filter: blur(20px);
                    border: 1px solid var(--glass-border);
                    border-radius: 25px;
                    padding: 40px;
                    max-width: 600px;
                    max-height: 80vh;
                    overflow-y: auto;
                    box-shadow: var(--shadow-elevated);
                    position: relative;
                `;

                const closeButton = document.createElement('button');
                closeButton.innerHTML = '√ó';
                closeButton.style.cssText = `
                    position: absolute;
                    top: 20px;
                    right: 25px;
                    background: var(--pink-primary);
                    color: white;
                    border: none;
                    border-radius: 50%;
                    width: 35px;
                    height: 35px;
                    font-size: 18px;
                    font-weight: bold;
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                `;
                closeButton.onclick = () => modal.remove();

                const title = document.createElement('h2');
                title.style.cssText = `
                    font-family: 'Playfair Display', serif;
                    color: var(--pink-primary);
                    margin-bottom: 25px;
                    font-size: 1.8rem;
                    text-align: center;
                `;
                title.textContent = report.title;

                const content = document.createElement('div');
                content.style.cssText = `
                    white-space: pre-line;
                    font-family: 'Inter', sans-serif;
                    font-size: 1rem;
                    line-height: 1.8;
                    color: var(--text-primary);
                `;
                content.textContent = report.content;

                const buttonContainer = document.createElement('div');
                buttonContainer.style.cssText = 'text-align: center; margin-top: 30px;';
                
                const closeReportBtn = document.createElement('button');
                closeReportBtn.className = 'btn btn-primary';
                closeReportBtn.textContent = 'Close Report';
                closeReportBtn.onclick = () => modal.remove();

                buttonContainer.appendChild(closeReportBtn);
                modalContent.appendChild(closeButton);
                modalContent.appendChild(title);
                modalContent.appendChild(content);
                modalContent.appendChild(buttonContainer);
                modal.appendChild(modalContent);
                document.body.appendChild(modal);

                // Close modal when clicking outside
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.remove();
                    }
                });
            }
        }

        // Report generation function - saves current data and starts next cycle
        function generateNewReport() {
            const today = new Date().toLocaleDateString();
            const reportNumber = Math.floor(Math.random() * 1000) + 1;
            
            alert(`üìä Report #${reportNumber} Generated Successfully!\n\nDate: ${today}\nStatus: Saved to Analytics\n\n‚úÖ Current data cycle complete\nüîÑ Ready to start next reporting cycle\n\nTaking you back to Mass DMs to begin fresh data entry...`);
            
            // Take user back to Mass DMs (page 0) to start next cycle
            showPage(0);
        }

        function resetAllData() {
            const setText = (id, text) => { const el = document.getElementById(id); if (el) el.textContent = text; };

            // Header metrics ‚Üí 0
            setText('total-reports', '0');
            setText('total-revenue', '$0');
            setText('active-campaigns', '0');

            // Daily ‚Üí 0
            setText('daily-rev', '$0');
            setText('daily-subs', '0');
            setText('daily-cvr', '0%');
            setText('daily-active', '0');

            // Weekly ‚Üí 0
            setText('weekly-rev', '$0');
            setText('weekly-subs', '0');
            setText('weekly-cvr', '0%');
            setText('weekly-impr', '0');

            // Monthly ‚Üí 0
            setText('monthly-rev', '$0');
            setText('monthly-subs', '0');
            setText('monthly-cvr', '0%');
            setText('monthly-reach', '0');

            // Inputs
            document.querySelectorAll('input[type="number"]').forEach(i => { i.value = '0'; i.dispatchEvent(new Event('input')); });
            document.querySelectorAll('input[type="text"], textarea').forEach(i => i.value = '');
            document.querySelectorAll('input[type="date"]').forEach(i => i.value = '');
            document.querySelectorAll('select').forEach(s => s.selectedIndex = 0);

            // Totals
            document.querySelectorAll('.total-cell').forEach(td => td.textContent = '$0.00');

            // Mass DM back to selection
            const sel = document.getElementById('shift-selection');
            const mgmt = document.getElementById('dm-management');
            const grid = document.getElementById('dm-grid');
            if (grid) grid.innerHTML = '';
            if (sel) sel.style.display = 'block';
            if (mgmt) mgmt.style.display = 'none';

            // Navigate to Mass DMs (page 0)
            if (typeof showPage === 'function') showPage(0);
        }

        function resetTable(tableId) {
            try {
                const table = document.getElementById(tableId);
                if (!table) {
                    console.log('Table not found:', tableId);
                    return;
                }
                
                const tbody = table.getElementsByTagName('tbody')[0];
                if (!tbody) {
                    console.log('Tbody not found for:', tableId);
                    return;
                }
                
                const rows = Array.from(tbody.getElementsByTagName('tr'));
                
                // Remove all rows except the first one
                for (let i = rows.length - 1; i > 0; i--) {
                    tbody.removeChild(rows[i]);
                }
                
                // Clear the first row's inputs
                if (rows.length > 0) {
                    const firstRow = rows[0];
                    const inputs = firstRow.querySelectorAll('input, select, textarea');
                    
                    inputs.forEach(input => {
                        if (input.type === 'checkbox') {
                            input.checked = true;
                        } else if (input.tagName === 'SELECT') {
                            input.selectedIndex = 0;
                        } else {
                            input.value = '';
                        }
                    });
                    
                    // Reset any total cells
                    const totalCells = firstRow.querySelectorAll('.total-cell');
                    totalCells.forEach(cell => {
                        cell.textContent = '$0.00';
                    });
                }
                
                console.log('Reset completed for:', tableId);
                
            } catch (error) {
                console.error('Error resetting table:', tableId, error);
            }
        }

        function resetMassDMSection() {
            try {
                // Reset shift selection
                const shiftSelection = document.getElementById('shift-selection');
                const dmManagement = document.getElementById('dm-management');
                
                if (shiftSelection) shiftSelection.style.display = 'block';
                if (dmManagement) dmManagement.style.display = 'none';
                
                selectedShift = null;
                
                // Clear the DM grid
                const dmGrid = document.getElementById('dm-grid');
                if (dmGrid) {
                    dmGrid.innerHTML = '';
                }
                
                console.log('Mass DM section reset completed');
                
            } catch (error) {
                console.error('Error resetting Mass DM section:', error);
            }
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            updateNavigation();
            
            // Add calculation listeners to existing rows
            document.querySelectorAll('#revenue-table tbody tr, #ppv-table tbody tr').forEach(row => {
                addCalculationListeners(row);
            });
            
            // Update existing totals
            document.querySelectorAll('#revenue-table tbody tr, #ppv-table tbody tr').forEach(row => {
                updateRowTotal(row);
            });

            // Add input validation to all existing inputs
            addInputValidation();

            // Bind reset button
            const resetBtn = document.getElementById('reset-btn');
            if (resetBtn) resetBtn.addEventListener('click', resetAllData);
        });
    </script>
</body>
</html>